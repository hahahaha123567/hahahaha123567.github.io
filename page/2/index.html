<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/snowman-32.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/snowman-32.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/snowman-16.ico">
  <link rel="mask-icon" href="/images/snowman-32.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"hahahaha123567.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":true,"version":"8.12.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"mac"},"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="niconiconi">
<meta property="og:type" content="website">
<meta property="og:title" content="hahahaha123567">
<meta property="og:url" content="https://hahahaha123567.github.io/page/2/index.html">
<meta property="og:site_name" content="hahahaha123567">
<meta property="og:description" content="niconiconi">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="hahahaha123567">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://hahahaha123567.github.io/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>hahahaha123567</title>
  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">hahahaha123567</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">hahahaha123567</p>
  <div class="site-description" itemprop="description">niconiconi</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">61</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/hahahaha123567" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;hahahaha123567" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="http://bangumi.tv/user/hahahaha123567" title="Bangumi → http:&#x2F;&#x2F;bangumi.tv&#x2F;user&#x2F;hahahaha123567" rel="noopener" target="_blank">Bangumi</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://lovelive.ws/" title="https:&#x2F;&#x2F;lovelive.ws&#x2F;" rel="noopener" target="_blank">μ's</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2021-02-19-%E9%98%85%E8%AF%BBRocketMQ%E6%BA%90%E7%A0%811.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021-02-19-%E9%98%85%E8%AF%BBRocketMQ%E6%BA%90%E7%A0%811.html" class="post-title-link" itemprop="url">阅读RocketMQ源码(1) - 项目信息,本地日志模块</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-02-19 00:00:00" itemprop="dateCreated datePublished" datetime="2021-02-19T00:00:00+08:00">2021-02-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-07-22 16:03:46" itemprop="dateModified" datetime="2021-07-22T16:03:46+08:00">2021-07-22</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>867</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">https://github.com/apache/rocketmq</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>源码: <a target="_blank" rel="noopener" href="https://github.com/apache/rocketmq">https://github.com/apache/rocketmq</a></p>
<p>官网: <a target="_blank" rel="noopener" href="https://rocketmq.apache.org/">https://rocketmq.apache.org</a></p>
<p>中文文档: <a target="_blank" rel="noopener" href="https://github.com/apache/rocketmq/tree/master/docs/cn">https://github.com/apache/rocketmq/tree/master/docs/cn</a></p>
<p>版本: 4.8</p>
<h1 id="项目模块"><a href="#项目模块" class="headerlink" title="项目模块"></a>项目模块</h1><p>用idea的analyze module dependencies功能整理出依赖顺序,也是阅读顺序</p>
<ul>
<li>logging, 本地日志模块</li>
<li>remoting, 通信模块</li>
<li>common, 工具类</li>
<li>srvutil, 命令行交互工具类</li>
<li>acl, 网络控制工具</li>
<li>client, 客户端代码</li>
<li>filter, 过滤器解析代码</li>
<li>logappender, 对几种日志框架的适配</li>
<li>store, 落盘逻辑</li>
<li>tools, 监控工具</li>
<li>openmessaging, open-message协议实现</li>
<li>broker, broker代码</li>
<li>namesrv, 路由注册中心</li>
</ul>
<h1 id="本地日志模块"><a href="#本地日志模块" class="headerlink" title="本地日志模块"></a>本地日志模块</h1><p>Log4j的最精简fork</p>
<p>Appender -&gt; Logger(AppenderPipeline)</p>
<p>实现了<code>RollingFileAppender</code>等多种appender,用到writer和buffer</p>
<p><code>SysLogger</code>即标准输入输出兜底</p>
<h2 id="tips"><a href="#tips" class="headerlink" title="tips"></a>tips</h2><h3 id="获取当前系统的行分隔符"><a href="#获取当前系统的行分隔符" class="headerlink" title="获取当前系统的行分隔符"></a>获取当前系统的行分隔符</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">System.getProperty(<span class="string">&quot;line.separator&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="finalize"><a href="#finalize" class="headerlink" title="finalize"></a>finalize</h3><p>jvm回收该对象时执行,用来释放一些手动申请的资源</p>
<p>大量对象同时执行finalize可能引起执行队列堆积</p>
<p>Java9开始被java.lang.ref.Cleaner和java.lang.ref.PhantomReference代替</p>
<h3 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h3><p>product</p>
<ul>
<li>InternalLogger</li>
</ul>
<p>concreate products</p>
<ul>
<li>InnerLogger</li>
<li>Slf4jLogger</li>
</ul>
<p>creator</p>
<ul>
<li>InternalLoggerFactory</li>
</ul>
<p>concreate creators</p>
<ul>
<li>InnerLoggerFactory</li>
<li>Slf4jLoggerFactory</li>
</ul>
<p>creator给concreate creators提供注册方法,给用户提供生产方法</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2021-02-07-csrankings%E4%BC%9A%E8%AE%AE%E7%B4%A2%E5%BC%95.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021-02-07-csrankings%E4%BC%9A%E8%AE%AE%E7%B4%A2%E5%BC%95.html" class="post-title-link" itemprop="url">csrankings会议索引</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-02-07 00:00:00 / 修改时间：11:37:29" itemprop="dateCreated datePublished" datetime="2021-02-07T00:00:00+08:00">2021-02-07</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">http://csrankings.org</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="AI"><a href="#AI" class="headerlink" title="AI"></a>AI</h1><h2 id="Artificial-intelligence-人工智能"><a href="#Artificial-intelligence-人工智能" class="headerlink" title="Artificial intelligence 人工智能"></a>Artificial intelligence 人工智能</h2><ul>
<li>AAAI</li>
<li>IJCAI</li>
</ul>
<h2 id="Computer-vision-计算机视觉"><a href="#Computer-vision-计算机视觉" class="headerlink" title="Computer vision 计算机视觉"></a>Computer vision 计算机视觉</h2><ul>
<li>CVPR</li>
<li>ECCV</li>
<li>ICCV</li>
</ul>
<h2 id="Machine-learning-amp-data-mining-机器学习-amp-数据挖掘"><a href="#Machine-learning-amp-data-mining-机器学习-amp-数据挖掘" class="headerlink" title="Machine learning &amp; data mining 机器学习&amp;数据挖掘"></a>Machine learning &amp; data mining 机器学习&amp;数据挖掘</h2><ul>
<li>ICML</li>
<li>KDD</li>
<li>NIPS</li>
</ul>
<h2 id="Natural-language-processing-自然语言处理"><a href="#Natural-language-processing-自然语言处理" class="headerlink" title="Natural language processing 自然语言处理"></a>Natural language processing 自然语言处理</h2><ul>
<li>ACL</li>
<li>EMNLP</li>
<li>NAACL</li>
</ul>
<h2 id="The-Web-amp-information-retrieval-网络信息检索"><a href="#The-Web-amp-information-retrieval-网络信息检索" class="headerlink" title="The Web &amp; information retrieval 网络信息检索"></a>The Web &amp; information retrieval 网络信息检索</h2><ul>
<li>SIGIR</li>
<li>WWW</li>
</ul>
<h1 id="Systems"><a href="#Systems" class="headerlink" title="Systems"></a>Systems</h1><h2 id="Computer-architecture-计算机架构"><a href="#Computer-architecture-计算机架构" class="headerlink" title="Computer architecture 计算机架构"></a>Computer architecture 计算机架构</h2><ul>
<li>ASPLOS</li>
<li>ISCA</li>
<li>MICRO</li>
</ul>
<h2 id="Operating-systems-操作系统"><a href="#Operating-systems-操作系统" class="headerlink" title="Operating systems 操作系统"></a>Operating systems 操作系统</h2><ul>
<li>OSDI</li>
<li>SOSP</li>
</ul>
<h2 id="Computer-networks-计算机网络"><a href="#Computer-networks-计算机网络" class="headerlink" title="Computer networks 计算机网络"></a>Computer networks 计算机网络</h2><ul>
<li>SIGCOMM</li>
<li>NSDI</li>
</ul>
<h2 id="Computer-security-计算机安全"><a href="#Computer-security-计算机安全" class="headerlink" title="Computer security 计算机安全"></a>Computer security 计算机安全</h2><ul>
<li>CCS</li>
<li>IEEE S&amp;P</li>
<li>USENIX</li>
</ul>
<h2 id="Databases-数据库"><a href="#Databases-数据库" class="headerlink" title="Databases 数据库"></a>Databases 数据库</h2><ul>
<li>SIGMOD</li>
<li>VLDB</li>
</ul>
<h2 id="Programming-languages-编程语言"><a href="#Programming-languages-编程语言" class="headerlink" title="Programming languages 编程语言"></a>Programming languages 编程语言</h2><ul>
<li>PLDI</li>
<li>POPL</li>
</ul>
<h2 id="Design-automation-设计自动化"><a href="#Design-automation-设计自动化" class="headerlink" title="Design automation 设计自动化"></a>Design automation 设计自动化</h2><ul>
<li>DAC</li>
<li>ICCAD</li>
</ul>
<h2 id="Embedded-amp-real-time-systems-嵌入式和实时系统"><a href="#Embedded-amp-real-time-systems-嵌入式和实时系统" class="headerlink" title="Embedded &amp; real-time systems 嵌入式和实时系统"></a>Embedded &amp; real-time systems 嵌入式和实时系统</h2><ul>
<li>EMSOFT</li>
<li>RTAS</li>
<li>RTSS</li>
</ul>
<h2 id="High-performance-computing-高性能计算"><a href="#High-performance-computing-高性能计算" class="headerlink" title="High-performance computing 高性能计算"></a>High-performance computing 高性能计算</h2><ul>
<li>HPDC</li>
<li>ICS</li>
<li>SC</li>
</ul>
<h2 id="Mobile-computing-移动计算"><a href="#Mobile-computing-移动计算" class="headerlink" title="Mobile computing 移动计算"></a>Mobile computing 移动计算</h2><ul>
<li>MobiCom</li>
<li>MobiSys</li>
<li>SenSys</li>
</ul>
<h2 id="Measurement-amp-perf-analysis-测量与性能分析"><a href="#Measurement-amp-perf-analysis-测量与性能分析" class="headerlink" title="Measurement &amp; perf. analysis 测量与性能分析"></a>Measurement &amp; perf. analysis 测量与性能分析</h2><ul>
<li>IMC</li>
<li>SIGMETRICS</li>
</ul>
<h2 id="Software-engineering-软件工程"><a href="#Software-engineering-软件工程" class="headerlink" title="Software engineering 软件工程"></a>Software engineering 软件工程</h2><ul>
<li>FSE</li>
<li>ICSE</li>
</ul>
<h1 id="Theory"><a href="#Theory" class="headerlink" title="Theory"></a>Theory</h1><h2 id="Algorithms-amp-complexity-算法与复杂度"><a href="#Algorithms-amp-complexity-算法与复杂度" class="headerlink" title="Algorithms &amp; complexity 算法与复杂度"></a>Algorithms &amp; complexity 算法与复杂度</h2><ul>
<li>FOCS</li>
<li>SODA</li>
<li>STOC</li>
</ul>
<h2 id="Cryptography-密码学"><a href="#Cryptography-密码学" class="headerlink" title="Cryptography 密码学"></a>Cryptography 密码学</h2><ul>
<li>CRYPTO</li>
<li>EuroCrypt</li>
</ul>
<h2 id="Logic-amp-verification-逻辑与验证"><a href="#Logic-amp-verification-逻辑与验证" class="headerlink" title="Logic &amp; verification 逻辑与验证"></a>Logic &amp; verification 逻辑与验证</h2><ul>
<li>CAV</li>
<li>LICS</li>
</ul>
<h1 id="Interdisciplinary-Areas"><a href="#Interdisciplinary-Areas" class="headerlink" title="Interdisciplinary Areas"></a>Interdisciplinary Areas</h1><h2 id="Computer-graphics-计算机图形学"><a href="#Computer-graphics-计算机图形学" class="headerlink" title="Computer graphics 计算机图形学"></a>Computer graphics 计算机图形学</h2><ul>
<li>SIGGRAPH</li>
<li>SIGGRAPH Asia</li>
</ul>
<h2 id="Economics-amp-computation-经济与计算"><a href="#Economics-amp-computation-经济与计算" class="headerlink" title="Economics &amp; computation 经济与计算"></a>Economics &amp; computation 经济与计算</h2><ul>
<li>EC</li>
<li>WINE</li>
</ul>
<h2 id="Comp-bio-amp-bioinformatics-生物信息学"><a href="#Comp-bio-amp-bioinformatics-生物信息学" class="headerlink" title="Comp. bio &amp; bioinformatics 生物信息学"></a>Comp. bio &amp; bioinformatics 生物信息学</h2><ul>
<li>ISMB</li>
<li>RECOMB</li>
</ul>
<h2 id="Human-computer-interaction-人机交互"><a href="#Human-computer-interaction-人机交互" class="headerlink" title="Human-computer interaction 人机交互"></a>Human-computer interaction 人机交互</h2><ul>
<li>CHI</li>
<li>UbiComp &#x2F; Pervasive &#x2F; IMWUT</li>
<li>UIST</li>
</ul>
<h2 id="Robotics-机器人技术"><a href="#Robotics-机器人技术" class="headerlink" title="Robotics 机器人技术"></a>Robotics 机器人技术</h2><ul>
<li>ICRA</li>
<li>IROS</li>
<li>RSS</li>
</ul>
<h2 id="Visualization-可视化"><a href="#Visualization-可视化" class="headerlink" title="Visualization 可视化"></a>Visualization 可视化</h2><ul>
<li>VIS</li>
<li>VR</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2021-01-28-Java%E5%87%A0%E4%B8%AA%E5%B8%B8%E7%94%A8%E7%9A%84io%E7%B1%BB.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021-01-28-Java%E5%87%A0%E4%B8%AA%E5%B8%B8%E7%94%A8%E7%9A%84io%E7%B1%BB.html" class="post-title-link" itemprop="url">Java几个常用的io类</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2021-01-28 00:00:00 / 修改时间：16:37:24" itemprop="dateCreated datePublished" datetime="2021-01-28T00:00:00+08:00">2021-01-28</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>611</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">几种InputStream/OutputStream和Reader/Writer类的用法</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="字节流-InputStream-x2F-OutputStream"><a href="#字节流-InputStream-x2F-OutputStream" class="headerlink" title="字节流 InputStream&#x2F;OutputStream"></a>字节流 InputStream&#x2F;OutputStream</h1><h2 id="ByteArray"><a href="#ByteArray" class="headerlink" title="ByteArray"></a>ByteArray</h2><p>数据被写入一个byte数组, 缓冲区会随着数据的不断写入而自动增长</p>
<h2 id="Piped"><a href="#Piped" class="headerlink" title="Piped"></a>Piped</h2><p>多线程可以通过管道进行线程间的通讯</p>
<p>我们在线程A中向PipedOutputStream中写入数据，这些数据会自动的发送到与PipedOutputStream对应的PipedInputStream中，进而存储在PipedInputStream的缓冲中；此时，线程B通过读取PipedInputStream中的数据</p>
<p>使用时需要注意设置合适的缓冲区大小, 不会自动增长</p>
<h2 id="Object"><a href="#Object" class="headerlink" title="Object"></a>Object</h2><p>对基本数据和实现了 java.io.Serializable 接口的对象进行序列化操作支持</p>
<p>序列化不会自动保存static和transient变量”，因此我们若要保存它们，则需要通过writeObject()和readObject()去手动读写</p>
<h2 id="File"><a href="#File" class="headerlink" title="File"></a>File</h2><p>读写文件</p>
<h2 id="Buffered"><a href="#Buffered" class="headerlink" title="Buffered"></a>Buffered</h2><p>继承自FileterStream，提供内部缓冲区数组</p>
<p>内部使用volatile和AtomicReferenceFieldUpdater保证字段更新的原子性</p>
<h2 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h2><p>许应用程序以与机器无关方式从底层输入流中读写基本 Java 数据类型</p>
<h2 id="PrintStream"><a href="#PrintStream" class="headerlink" title="PrintStream"></a>PrintStream</h2><p>允许格式化打印流</p>
<p>System.out is instance of PrintStream</p>
<h1 id="RandomAccessFile"><a href="#RandomAccessFile" class="headerlink" title="RandomAccessFile"></a>RandomAccessFile</h1><p>支持对文件随机访问的读取和写入</p>
<hr>
<p>参考文章</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/skywang12345/p/io_01.html">java io系列01之 “目录”</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2020-12-23-springboot%E5%86%85%E7%BD%AE%E7%9A%84tomcat.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020-12-23-springboot%E5%86%85%E7%BD%AE%E7%9A%84tomcat.html" class="post-title-link" itemprop="url">springboot内置的tomcat</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-12-23 00:00:00" itemprop="dateCreated datePublished" datetime="2020-12-23T00:00:00+08:00">2020-12-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-07-01 20:32:23" itemprop="dateModified" datetime="2021-07-01T20:32:23+08:00">2021-07-01</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">.</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="服务器接收到网络包"><a href="#服务器接收到网络包" class="headerlink" title="服务器接收到网络包"></a>服务器接收到网络包</h1><ol>
<li>网卡接收到网络包,使用DMA不经过CPU直接将数据包放到Circular buffer(圆形缓冲区,适合先进先出,旧数据读出后新数据不需要移位)</li>
<li>网卡发送硬中断信号,操作系统使用软中断处理多个数据包,没有新数据再恢复终端</li>
<li>操作系统将数据从Circular buffer拷贝到sk_buff缓冲区,网络层,传输层,通过socket转交给用户进程</li>
</ol>
<p>简单解析<br><a target="_blank" rel="noopener" href="https://xie.infoq.cn/article/6ba14b756c3019cc737ed48a6">你不好奇 Linux 网络发包过程吗？ - InfoQ 写作平台</a><br><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000008836467">Linux网络 - 数据包的接收过程_Linux程序员 - SegmentFault 思否</a><br>源码解析<br><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/256428917">图解Linux网络包接收过程 - 知乎</a><br><a target="_blank" rel="noopener" href="https://plantegg.github.io/2019/05/08/%E5%B0%B1%E6%98%AF%E8%A6%81%E4%BD%A0%E6%87%82%E7%BD%91%E7%BB%9C--%E7%BD%91%E7%BB%9C%E5%8C%85%E7%9A%84%E6%B5%81%E8%BD%AC/">就是要你懂网络–网络包的流转 | plantegg</a></p>
<h1 id="springboot支持不同的Java-servlet服务器"><a href="#springboot支持不同的Java-servlet服务器" class="headerlink" title="springboot支持不同的Java servlet服务器"></a>springboot支持不同的Java servlet服务器</h1><p>服务器接收到http请求, 操作系统建立了TCP连接之后</p>
<p>见 <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-boot/docs/2.1.10.RELEASE/reference/html/howto-embedded-web-servers.html">78. Embedded Web Servers</a> , springboot默认内置tomcat服务器, 可以通过修改pom配置切换为jetty或undertow</p>
<h1 id="tomcat内置线程池"><a href="#tomcat内置线程池" class="headerlink" title="tomcat内置线程池"></a>tomcat内置线程池</h1><p>springboot内置的tomcat <a target="_blank" rel="noopener" href="https://mvnrepository.com/artifact/org.apache.tomcat.embed/tomcat-embed-core">org.apache.tomcat.embed:tomcat-embed-core</a> 中,负责处理请求的线程池由AbstractEndpoint维护</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">createExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">    internalExecutor = <span class="literal">true</span>;</span><br><span class="line">    <span class="type">TaskQueue</span> <span class="variable">taskqueue</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TaskQueue</span>();</span><br><span class="line">    <span class="type">TaskThreadFactory</span> <span class="variable">tf</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TaskThreadFactory</span>(getName() + <span class="string">&quot;-exec-&quot;</span>, daemon, getThreadPriority());</span><br><span class="line">    executor = <span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>(getMinSpareThreads(), getMaxThreads(), <span class="number">60</span>, TimeUnit.SECONDS,taskqueue, tf);</span><br><span class="line">    taskqueue.setParent( (ThreadPoolExecutor) executor);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">如果使用springboot默认的参数,corePoolSize=<span class="number">10</span>,maxPoolSize=<span class="number">200</span>,keepAliveTime=60s,</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/l4642247/article/details/81631770">https://blog.csdn.net/l4642247/article/details/81631770</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2020-11-23-CPU%E5%B8%B8%E8%AF%86.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020-11-23-CPU%E5%B8%B8%E8%AF%86.html" class="post-title-link" itemprop="url">CPU常识</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-11-23 00:00:00" itemprop="dateCreated datePublished" datetime="2020-11-23T00:00:00+08:00">2020-11-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-06-23 19:43:11" itemprop="dateModified" datetime="2021-06-23T19:43:11+08:00">2021-06-23</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>245</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">.</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="按指令集划分"><a href="#按指令集划分" class="headerlink" title="按指令集划分"></a>按指令集划分</h1><ul>
<li>CISC指令集<ul>
<li>X86架构<ul>
<li>Intel</li>
<li>AMD</li>
</ul>
</li>
</ul>
</li>
<li>RISC指令集<ul>
<li>ARM架构<ul>
<li>ARM</li>
</ul>
</li>
<li>MIPS架构</li>
<li>RISC-V</li>
</ul>
</li>
</ul>
<h1 id="Intel产品线"><a href="#Intel产品线" class="headerlink" title="Intel产品线"></a>Intel产品线</h1><h2 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h2><ul>
<li>Xeon至强</li>
<li>Itanium安腾</li>
</ul>
<h2 id="PC"><a href="#PC" class="headerlink" title="PC"></a>PC</h2><ul>
<li>Core酷睿</li>
<li>Pentium奔腾</li>
<li>Celeron赛扬</li>
</ul>
<h2 id="移动端"><a href="#移动端" class="headerlink" title="移动端"></a>移动端</h2><ul>
<li>Atom凌动</li>
<li>Quark SOC</li>
</ul>
<h1 id="Intel的后缀"><a href="#Intel的后缀" class="headerlink" title="Intel的后缀"></a>Intel的后缀</h1><ul>
<li>G, 附带AMD的GPU</li>
<li>K, 可超频</li>
<li>T, 低压版桌面</li>
<li>Y,M,U, 低压版移动</li>
<li>X, 当代最强</li>
</ul>
<h1 id="AMD产品线"><a href="#AMD产品线" class="headerlink" title="AMD产品线"></a>AMD产品线</h1><h2 id="PC-1"><a href="#PC-1" class="headerlink" title="PC"></a>PC</h2><ul>
<li>RyzenThreadripper锐龙线程撕裂者</li>
<li>Ryzen锐龙</li>
<li>Athlon速龙</li>
</ul>
<h2 id="GPU"><a href="#GPU" class="headerlink" title="GPU"></a>GPU</h2><ul>
<li>Radeon</li>
<li>Radeon Pro</li>
<li>FirePro</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2020-06-17-%E5%B8%B8%E8%A7%81Linux%E5%8F%91%E8%A1%8C%E7%89%88.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020-06-17-%E5%B8%B8%E8%A7%81Linux%E5%8F%91%E8%A1%8C%E7%89%88.html" class="post-title-link" itemprop="url">常见Linux发行版</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-06-17 00:00:00" itemprop="dateCreated datePublished" datetime="2020-06-17T00:00:00+08:00">2020-06-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-07-16 20:35:24" itemprop="dateModified" datetime="2020-07-16T20:35:24+08:00">2020-07-16</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.4k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">常见Linux发行版的派生关系和简介</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="派生关系"><a href="#派生关系" class="headerlink" title="派生关系"></a>派生关系</h1><p>Red Hat Enterprise Linux</p>
<ul>
<li>CentOS</li>
<li>Fedora</li>
</ul>
<p>Debian</p>
<ul>
<li>Ubuntu<ul>
<li>Elementary OS</li>
</ul>
</li>
<li>Deepin</li>
</ul>
<p>Arch</p>
<p>Gentoo</p>
<h1 id="版本简介"><a href="#版本简介" class="headerlink" title="版本简介"></a>版本简介</h1><h2 id="Red-Hat-Enterprise-Linux"><a href="#Red-Hat-Enterprise-Linux" class="headerlink" title="Red Hat Enterprise Linux"></a>Red Hat Enterprise Linux</h2><p>Red Hat Linux是由Red Hat公司发行的一个Linux发行包</p>
<p>Red Hat Linux中的RPM软件包格式可以说是Linux社区的一个事实标准，被广泛使用于其他Linux发行包中</p>
<p>Red Hat公司不再开发桌面版的Linux发行包，而将全部力量集中在服务器版的开发上</p>
<h2 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h2><p>CentOS（Community Enterprise Operating System）是Linux发行版之一，它是来自于Red Hat Enterprise Linux（RHEL）依照开放源代码规定发布的源代码所编译而成，两者的不同，在于CentOS并不包含封闭源代码软件。CentOS 对上游代码的主要修改是为了移除不能自由使用的商标。</p>
<p>CentOS和RHEL一样，都可以使用Fedora EPEL来补足软件</p>
<h2 id="Fedora"><a href="#Fedora" class="headerlink" title="Fedora"></a>Fedora</h2><p>由Fedora项目社群开发、红帽公司赞助</p>
<p>Fedora对于用户而言，是一套功能完备、更新快速的免费操作系统；而对赞助者Red Hat公司而言，它是许多新技术的测试平台，被认为可用的技术最终会加入到Red Hat Enterprise Linux中</p>
<h2 id="Debian"><a href="#Debian" class="headerlink" title="Debian"></a>Debian</h2><p>作为最早的Linux发行版之一，Debian在创建之初便被定位为在GNU计划的精神指导下进行公开开发并自由发布的项目</p>
<p>dpkg是Debian中软件包管理的低级别基础工具。dpkg命令行工具并不知晓软件源的配置，其数据库仅存储已安装在当前系统中的软件包的信息</p>
<p>高级包装工具（APT）提供了管理Debian系统软件的功能，且可以从软件源获取并解析软件包依赖</p>
<h2 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h2><p>Ubuntu基于Debian发行版和GNOME桌面环境</p>
<p>Ubuntu建基于Debian的不稳定分支：不论其软件格式（deb）还是软件管理与安装系统（Debian Apt）。Ubuntu的开发者会把对软件的修改即时反馈给Debian社群，而不是在发布新版时才宣布这些修改</p>
<p>Ubuntu所有系统相关的任务均需使用Sudo指令是它的一大特色，这种方式比传统的以系统管理员账号进行管理工作的方式更为安全</p>
<h2 id="Elementary-OS"><a href="#Elementary-OS" class="headerlink" title="Elementary OS"></a>Elementary OS</h2><p>elementary OS是一个基于Ubuntu的桌面Linux发行版。它采用自有的基于GNOME的名为Pantheon的桌面环境</p>
<p>这个桌面环境出众的原因是它深度集成了其他elementary OS应用程序，如Plank（一个基于Docky的Dock) 、Midori（默认的网页浏览器）或Scratch（一个简单的文本编辑器）</p>
<h2 id="Deepin"><a href="#Deepin" class="headerlink" title="Deepin"></a>Deepin</h2><p>deepin继承了来自Debian stable的所有软件包，并为自己的软件库提供了流行的软件</p>
<p>现在deepin的CrossOver授权已经到期，但是deepin又自主开发了基于wine的deepinwine，因此deepin仍可以较好的运行一些Windows上的软件</p>
<h2 id="Arch"><a href="#Arch" class="headerlink" title="Arch"></a>Arch</h2><p>Arch Linux 采用滚动发行模式，即没有所谓的大版本更新，每次常规更新都会将系统和软件保持在最新状态</p>
<p>通过二进制包管理系统pacman，仅需一个命令就能完成安装、升级等多个操作</p>
<h2 id="Gentoo"><a href="#Gentoo" class="headerlink" title="Gentoo"></a>Gentoo</h2><p>Gentoo Linux为用户提供了大量的应用程序源代码。Gentoo Linux的每一部分都可以在最终用户的系统上重新编译建造，甚至包括最基本的系统库和编译器自身，基于Portage包管理系统</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2020-04-17-RPC%E6%A6%82%E5%BF%B5.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020-04-17-RPC%E6%A6%82%E5%BF%B5.html" class="post-title-link" itemprop="url">RPC的概念</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-04-17 00:00:00" itemprop="dateCreated datePublished" datetime="2020-04-17T00:00:00+08:00">2020-04-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-06-23 19:43:07" itemprop="dateModified" datetime="2021-06-23T19:43:07+08:00">2021-06-23</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>109</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">.</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h1><p><strong>RPC</strong></p>
<ul>
<li>序列化&#x2F;反序列化</li>
<li>网络通讯</li>
</ul>
<p><strong>分布式RPC</strong></p>
<ul>
<li>服务注册&#x2F;查询</li>
<li>RPC</li>
</ul>
<h1 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h1><p><strong>GRPC</strong></p>
<ul>
<li>protobuf</li>
<li>http2, netty(Java)</li>
</ul>
<p><strong>dubbo</strong></p>
<ul>
<li>hessian等多种序列化</li>
<li>tcp, dubbo协议, netty</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2020-03-23-%E7%BA%BF%E7%A8%8B%E6%B1%A0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2020-03-23-%E7%BA%BF%E7%A8%8B%E6%B1%A0.html" class="post-title-link" itemprop="url">线程池</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-03-23 00:00:00" itemprop="dateCreated datePublished" datetime="2020-03-23T00:00:00+08:00">2020-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2021-07-01 20:33:40" itemprop="dateModified" datetime="2021-07-01T20:33:40+08:00">2021-07-01</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>8.5k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>8 分钟</span>
    </span>
</div>

            <div class="post-description">对《java.util.concurrent》囫囵吞枣的补充</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="Executor-与-线程池"><a href="#Executor-与-线程池" class="headerlink" title="Executor 与 线程池"></a>Executor 与 线程池</h1><h2 id="基本接口"><a href="#基本接口" class="headerlink" title="基本接口"></a>基本接口</h2><p>Java.util.concurrent 包定义了三种 executor 接口：</p>
<ul>
<li>Executor，支持加载新任务的简单接口</li>
<li>ExecutorService，Executor 的子接口，增加了帮助管理任务和executor本身的生命周期的功能</li>
<li>ScheduledExecutorService，ExecutorService 的子接口，支持周期性地执行任务</li>
</ul>
<h2 id="Executor"><a href="#Executor" class="headerlink" title="Executor"></a>Executor</h2><p>Executor 接口只定义了一个方法 execute，被设计用来代替一般的创建线程惯例</p>
<pre><code>// r implements Runnable
// 1. 自己控制线程
(new Thread(r)).start();
// 2. 用 executor
e.execute(r);
</code></pre>
<p>对于 execute 方法的实现并没有特殊要求。低级的实现只是创建一个新的线程并立即执行</p>
<p>但更有可能是使用一个已经存在的工作线程（worker Threads）去执行 r，或者将 r 放在一个执行队列中等待工作线程有空的时候再执行</p>
<h2 id="ExecutorService"><a href="#ExecutorService" class="headerlink" title="ExecutorService"></a>ExecutorService</h2><p>ExecutorService 接口提供了另一个相似的 submit 方法，但比 execute 更加通用</p>
<p>和 execute 一样，submit 接受 Runnable 对象，但也接受 Callable 对象，Callable 允许任务执行后返回一个值</p>
<p>Submit 方法返回 Future 对象，Future 对象被用来接收 Callable 返回的值，并管理 Callable 和 Runnable 对象所代表的任务</p>
<h2 id="ScheduledExecutorService"><a href="#ScheduledExecutorService" class="headerlink" title="ScheduledExecutorService"></a>ScheduledExecutorService</h2><p>ScheduledExecutorService 接口为它的父类 ExecutorService 的行为提供计划，允许在执行 Runnable 和 Callable 任务之前停顿一段时间</p>
<p>接口定义了 scheduleAtFixedRate 和 scheduleWithFixedDelay，这两个方法以特定的时间间隔重复地执行特定任务</p>
<h2 id="ThreadPoolExecutor-的构造参数"><a href="#ThreadPoolExecutor-的构造参数" class="headerlink" title="ThreadPoolExecutor 的构造参数"></a>ThreadPoolExecutor 的构造参数</h2><p>构造函数</p>
<pre><code>ThreadPoolExecutor(
    int corePoolSize,                  // 核心线程数
    int maximumPoolSize,               // 最大线程数
    long keepAliveTime,                // 空闲线程存活时间：空闲线程即超过核心线程数的工作线程
    TimeUnit unit,                     // keepAliveTime的单位
    BlockingQueue&lt;Runnable&gt; workQueue, // 线程池内部的等待队列：工作线程数等于核心线程数时，新任务放到等待队列中
    ThreadFactory threadFactory,       // 线程工厂，创建新线程的方式
    RejectedExecutionHandler handler   // 饱和策略：工作线程数等于最大线程数，且等待队列已满，处理新任务
);
</code></pre>
<h2 id="等待队列"><a href="#等待队列" class="headerlink" title="等待队列"></a>等待队列</h2><p>系统资源是有限的，任务的处理速度总有可能比不上任务的提交速度，因此，可以为ThreadPoolExecutor提供一个阻塞队列来保存因线程不足而等待的Runnable任务，这就是BlockingQueue</p>
<p>JDK为BlockingQueue提供了几种实现方式，常用的有：</p>
<ul>
<li>ArrayBlockingQueue：数组结构的阻塞队列</li>
<li>LinkedBlockingQueue：链表结构的阻塞队列</li>
<li>PriorityBlockingQueue：有优先级的阻塞队列</li>
<li>SynchronousQueue：不会存储元素的阻塞队列</li>
</ul>
<p>newFixedThreadPool 和 newSingleThreadExecutor 在默认情况下使用一个无界的 LinkedBlockingQueue</p>
<p>newCachedThreadPool 使用的 SynchronousQueue 十分有趣，看名称是个队列，但它却不能存储元素。要将一个任务放进队列，必须有另一个线程去接收这个任务，一个进就有一个出，队列不会存储任何东西。因此，SynchronousQueue 是一种移交机制，不能算是队列。newCachedThreadPool 生成的是一个没有上限的线程池，理论上提交多少任务都可以，使用 SynchronousQueue 作为等待队列正合适</p>
<h2 id="饱和策略"><a href="#饱和策略" class="headerlink" title="饱和策略"></a>饱和策略</h2><p>当有界的等待队列满了之后，就需要用到饱和策略去处理，ThreadPoolExecutor的饱和策略通过传入RejectedExecutionHandler来实现。如果没有为构造函数传入，将会使用默认的defaultHandler。</p>
<pre><code>private static final RejectedExecutionHandler defaultHandler = new AbortPolicy();

public static class AbortPolicy implements RejectedExecutionHandler &#123;
    public AbortPolicy() &#123; &#125;
    public void rejectedExecution(Runnable r, ThreadPoolExecutor e) &#123;
        throw new RejectedExecutionException(&quot;Task &quot; + r.toString() + &quot; rejected from &quot; + e.toString());
    &#125;
&#125;
</code></pre>
<h2 id="ThreadFactory"><a href="#ThreadFactory" class="headerlink" title="ThreadFactory"></a>ThreadFactory</h2><p>每当线程池需要创建一个新线程，都是通过线程工厂获取。如果不为ThreadPoolExecutor设定一个线程工厂，就会使用默认的 defaultThreadFactory：</p>
<pre><code>public static ThreadFactory defaultThreadFactory() &#123;
    return new DefaultThreadFactory();
&#125;

static class DefaultThreadFactory implements ThreadFactory &#123;
    private static final AtomicInteger poolNumber = new AtomicInteger(1);
    private final ThreadGroup group;
    private final AtomicInteger threadNumber = new AtomicInteger(1);
    private final String namePrefix;

    DefaultThreadFactory() &#123;
        SecurityManager s = System.getSecurityManager();
        group = (s != null) ? s.getThreadGroup() :
        Thread.currentThread().getThreadGroup();
        namePrefix = &quot;pool-&quot; +
            poolNumber.getAndIncrement() +
            &quot;-thread-&quot;;
    &#125;

    public Thread newThread(Runnable r) &#123;
        Thread t = new Thread(group, r,
                              namePrefix + threadNumber.getAndIncrement(),
                              0);
        if (t.isDaemon())
            t.setDaemon(false);
        if (t.getPriority() != Thread.NORM_PRIORITY)
            t.setPriority(Thread.NORM_PRIORITY);
        return t;
    &#125;
&#125;
</code></pre>
<p>平时打印线程池里线程的name时，会输出形如pool-1-thread-1之类的名称，就是在这里设置的。这个默认的线程工厂，创建的线程是普通的非守护线程，如果需要定制，实现ThreadFactory后传给ThreadPoolExecutor即可</p>
<h2 id="ThreadPoolExecutor-类"><a href="#ThreadPoolExecutor-类" class="headerlink" title="ThreadPoolExecutor 类"></a>ThreadPoolExecutor 类</h2><h3 id="Fields"><a href="#Fields" class="headerlink" title="Fields"></a>Fields</h3><ul>
<li><p>AtomicInteger ctl  runState 是线程池运行状态，workerCount 是工作线程的数量，ctl 用一个32位的int来同时保存 runState 和 workerCount，其中高3位是 runState，其余29位是 workerCount，代码中会反复使用 runStateOf() 和 workerCountOf() 来获取 runState 和 workerCount </p>
<p>  &#x2F;&#x2F; ctl<br>  private final AtomicInteger ctl &#x3D; new AtomicInteger(ctlOf(RUNNING, 0));<br>  private static final int COUNT_BITS &#x3D; Integer.SIZE - 3;<br>  private static final int CAPACITY   &#x3D; (1 &lt;&lt; COUNT_BITS) - 1;</p>
<p>  &#x2F;&#x2F; Packing and unpacking ctl<br>  private static int runStateOf(int c)     { return c &amp; ~CAPACITY; }<br>  private static int workerCountOf(int c)  { return c &amp; CAPACITY; }<br>  private static int ctlOf(int rs, int wc) { return rs | wc; }</p>
</li>
<li><p>BlockingQueue<Runnable> workQueue  等待队列</p>
</li>
<li><p>HashSet<Worker> workers  工作线程</p>
</li>
</ul>
<h3 id="Worker"><a href="#Worker" class="headerlink" title="Worker"></a>Worker</h3><p>线程池是由Worker类负责执行任务，Worker继承了AbstractQueuedSynchronizer，引出了Java并发框架的核心AQS。</p>
<p>AbstractQueuedSynchronizer，简称AQS，是Java并发包里一系列同步工具的基础实现，原理是根据状态位来控制线程的入队阻塞、出队唤醒来处理同步。</p>
<p>Worker利用AQS的功能实现对独占线程变量的设置，这是一个需要同步的过程</p>
<p>execute()</p>
<pre><code>public void execute(Runnable command) &#123;
    // 参数检验
    if (command == null)
        throw new NullPointerException();
    // 获取当前线程池状态
    int c = ctl.get();
    // 如果当前工作线程数 &lt; 核心线程数
    if (workerCountOf(c) &lt; corePoolSize) &#123;
        // 新建工作线程(worker)，若成功则返回
        if (addWorker(command, true))
            return;
        // 若新建失败，更新线程池状态
        c = ctl.get();
    &#125;
    // 在等待队列中新建线程成功
    if (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123;
        int recheck = ctl.get();
        // 若线程池不处于RUNNING状态则删掉刚刚新建的线程并handle掉
        if (! isRunning(recheck) &amp;&amp; remove(command))
            reject(command);
        // 如果此时没有工作线程(worker)，就添加个空的工作线程(worker)
        else if (workerCountOf(recheck) == 0)
            addWorker(null, false);
    &#125;
    // 若之前在等待队列中新建线程失败，就新建为工作线程(worker)
    else if (!addWorker(command, false))
        // 如果新建工作线程(worker)失败就handle掉
        reject(command);
&#125;
</code></pre>
<p>addWorker()</p>
<pre><code>// 用 lock 和 CAS 更新数据
private boolean addWorker(Runnable firstTask, boolean core) &#123;
    retry:
    for (;;) &#123;
        int c = ctl.get();
        int rs = runStateOf(c);

        // Check if queue empty only if necessary.
        if (rs &gt;= SHUTDOWN &amp;&amp;
            ! (rs == SHUTDOWN &amp;&amp;
               firstTask == null &amp;&amp;
               ! workQueue.isEmpty()))
            return false;

        for (;;) &#123;
            int wc = workerCountOf(c);
            if (wc &gt;= CAPACITY ||
                wc &gt;= (core ? corePoolSize : maximumPoolSize))
                return false;
            if (compareAndIncrementWorkerCount(c))
                break retry;
            c = ctl.get();  // Re-read ctl
            if (runStateOf(c) != rs)
                continue retry;
            // else CAS failed due to workerCount change; retry inner loop
        &#125;
    &#125;

    boolean workerStarted = false;
    boolean workerAdded = false;
    Worker w = null;
    try &#123;
        w = new Worker(firstTask);
        final Thread t = w.thread;
        if (t != null) &#123;
            final ReentrantLock mainLock = this.mainLock;
            mainLock.lock();
            try &#123;
                // Recheck while holding lock.
                // Back out on ThreadFactory failure or if
                // shut down before lock acquired.
                int rs = runStateOf(ctl.get());

                if (rs &lt; SHUTDOWN ||
                    (rs == SHUTDOWN &amp;&amp; firstTask == null)) &#123;
                    if (t.isAlive()) // precheck that t is startable
                        throw new IllegalThreadStateException();
                    workers.add(w);
                    int s = workers.size();
                    if (s &gt; largestPoolSize)
                        largestPoolSize = s;
                    workerAdded = true;
                &#125;
            &#125; finally &#123;
                mainLock.unlock();
            &#125;
            if (workerAdded) &#123;
                t.start();
                workerStarted = true;
            &#125;
        &#125;
    &#125; finally &#123;
        if (! workerStarted)
            addWorkerFailed(w);
    &#125;
    return workerStarted;
&#125;
</code></pre>
<p>runWorker()</p>
<pre><code>final void runWorker(Worker w) &#123;
    Thread wt = Thread.currentThread();
    Runnable task = w.firstTask;
    w.firstTask = null;
    w.unlock(); // allow interrupts
    boolean completedAbruptly = true;
    try &#123;
        // 从workQueue里拿task
        while (task != null || (task = getTask()) != null) &#123;
            w.lock();
            // 保证了线程池在STOP状态下线程是中断的，非STOP状态下线程没有被中断
            if ((runStateAtLeast(ctl.get(), STOP) ||
                 (Thread.interrupted() &amp;&amp;
                  runStateAtLeast(ctl.get(), STOP))) &amp;&amp;
                !wt.isInterrupted())
                wt.interrupt();
            try &#123;
                beforeExecute(wt, task);
                Throwable thrown = null;
                try &#123;
                    task.run();
                &#125; catch (RuntimeException x) &#123;
                    thrown = x; throw x;
                &#125; catch (Error x) &#123;
                    thrown = x; throw x;
                &#125; catch (Throwable x) &#123;
                    thrown = x; throw new Error(x);
                &#125; finally &#123;
                    afterExecute(task, thrown);
                &#125;
            &#125; finally &#123;
                task = null;
                w.completedTasks++;
                w.unlock();
            &#125;
        &#125;
        completedAbruptly = false;
    &#125; finally &#123;
        processWorkerExit(w, completedAbruptly);
    &#125;
&#125;
</code></pre>
<h2 id="工厂类-Executors"><a href="#工厂类-Executors" class="headerlink" title="工厂类 Executors"></a>工厂类 Executors</h2><h3 id="FixedThreadPool"><a href="#FixedThreadPool" class="headerlink" title="FixedThreadPool"></a>FixedThreadPool</h3><pre><code>public static ExecutorService newFixedThreadPool(int nThreads) &#123;
    return new ThreadPoolExecutor(nThreads, nThreads,
                                  0L, TimeUnit.MILLISECONDS,
                                  new LinkedBlockingQueue&lt;Runnable&gt;());
&#125;
</code></pre>
<p>FixedThreadPool 的优点是”优雅的缓冲”</p>
<p>考虑一个web应用服务，它的每一个线程只处理一个HTTP请求。如果这个应用简单地为每一个新来的请求创建一个新的处理线程，那么，当请求数量足够多时，线程占用的资源总和将超过系统的承受能力，服务器会因此忽然停止对所有请求的应答(常见的内存溢出)</p>
<p>而在使用固定大小线程池后，即使请求数量超出工作线程能够处理的请求上限，但是新来的HTTP请求会被暂时存放在消息队列中，当出现空闲的工作线程后，这些HTTP请求就会得到及时的处理</p>
<h3 id="SingleThreadExecutor"><a href="#SingleThreadExecutor" class="headerlink" title="SingleThreadExecutor"></a>SingleThreadExecutor</h3><pre><code>public static ExecutorService newSingleThreadExecutor() &#123;
    return new FinalizableDelegatedExecutorService
        (new ThreadPoolExecutor(1, 1,
                                0L, TimeUnit.MILLISECONDS,
                                new LinkedBlockingQueue&lt;Runnable&gt;()));
&#125;
</code></pre>
<p>newSingleThreadExecutor是线程数量固定为1的newFixedThreadPool版本，保证池内的任务串行 </p>
<h3 id="CachedThreadPool"><a href="#CachedThreadPool" class="headerlink" title="CachedThreadPool"></a>CachedThreadPool</h3><pre><code>public static ExecutorService newCachedThreadPool() &#123;
    return new ThreadPoolExecutor(0, Integer.MAX_VALUE,
                                  60L, TimeUnit.SECONDS,
                                  new SynchronousQueue&lt;Runnable&gt;());
&#125;
</code></pre>
<p>newCachedThreadPool 生成一个会缓存的线程池，线程数量可以从0到 Integer.MAX_VALUE，超时时间为1分钟。线程池用起来的效果是：如果有空闲线程，会复用线程；如果没有空闲线程，会新建线程；如果线程空闲超过1分钟，将会被回收 </p>
<h3 id="关闭"><a href="#关闭" class="headerlink" title="关闭"></a>关闭</h3><p>使用完 ExecutorService 之后你应该将其关闭，以使其中的线程不再运行。</p>
<p>比如，如果你的应用是通过一个 main() 方法启动的，之后 main 方法退出了你的应用，如果你的应用有一个活动的 ExexutorService 它将还会保持运行。ExecutorService 里的活动线程阻止了 JVM 的关闭。</p>
<p>要终止 ExecutorService 里的线程你需要调用 ExecutorService 的 shutdown() 方法。ExecutorService 并不会立即关闭，但它将不再接受新的任务，而且一旦所有线程都完成了当前任务的时候，ExecutorService 将会关闭。在 shutdown() 被调用之前所有提交给 ExecutorService 的任务都被执行。如果你想要立即关闭 ExecutorService，你可以调用 shutdownNow() 方法。这样会立即尝试停止所有执行中的任务，并忽略掉那些已提交但尚未开始处理的任务。无法担保执行任务的正确执行。可能它们被停止了，也可能已经执行结束</p>
<hr>
<p>参考资料</p>
<p>分析Java线程池的创建 - 简书</p>
<p>分析Java线程池执行原理 - 简书</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2019-12-02-[%E9%94%99%E8%AF%AF%20%E6%89%BE%E4%B8%8D%E5%88%B0%E6%88%96%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%E4%B8%BB%E7%B1%BB]%E6%8E%92%E6%9F%A5%E6%B5%81%E7%A8%8B.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019-12-02-%5B%E9%94%99%E8%AF%AF%20%E6%89%BE%E4%B8%8D%E5%88%B0%E6%88%96%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%E4%B8%BB%E7%B1%BB%5D%E6%8E%92%E6%9F%A5%E6%B5%81%E7%A8%8B.html" class="post-title-link" itemprop="url">错误 [找不到或无法加载主类]排查流程</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-12-02 00:00:00" itemprop="dateCreated datePublished" datetime="2019-12-02T00:00:00+08:00">2019-12-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-07-16 20:25:04" itemprop="dateModified" datetime="2020-07-16T20:25:04+08:00">2020-07-16</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.3k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">今天在测试一个新引入的外部包时进行简单测试，在一个 Handler 类中加了个 main 函数，在 mvn package 上传到服务器之后，`java -jar xx.jar` 报 [错误 找不到或无法加载主类 org.me.xx]，进行排查</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="classpath"><a href="#classpath" class="headerlink" title="classpath"></a>classpath</h1><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="variable">$JAVA_HOME</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$CLASSPATH</span></span><br></pre></td></tr></table></figure>
<p>结果均为空，将 CLASSPATH 初始化为<code>.</code>后报错不变</p>
<h1 id="maven-配置"><a href="#maven-配置" class="headerlink" title="maven 配置"></a>maven 配置</h1><p>maven package 出的 jar 包，想要直接 <code>java -jar</code> 运行的话需要在 <code>MANIFEST.MF</code> 中指定需要运行 main 的类 <code>Main-Class</code></p>
<p>maven 需要使用<code>maven-jar-plugin</code>配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-jar-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;maven-jar-plugin.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">archive</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">manifest</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">addClasspath</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addClasspath</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">classpathPrefix</span>&gt;</span>lib/<span class="tag">&lt;/<span class="name">classpathPrefix</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">mainClass</span>&gt;</span>org.me.sip.Main<span class="tag">&lt;/<span class="name">mainClass</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">manifest</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">archive</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>以上均无误后还是报错，在服务器上尝试解压jar包直接运行</p>
<p>jar包本质是修改了后缀名的zip包，所以可以直接用 unzip 解压，尝试后依然不行</p>
<p>检查代码，期望调用的类是其他类的子类，形如</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> <span class="keyword">extends</span> <span class="title class_">SimpleChannelInboundHandler</span>&lt;SipMessageEvent&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;niconiconi&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">channelRead0</span><span class="params">(ChannelHandlerContext ctx, SipMessageEvent event)</span> &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将继承关系删掉后即可以正常执行</p>
<p>将两个版本的代码编译后的字节码进行反编译 <code>javap -c -l -v xx</code> 得到的信息来看 main 函数签名也没有区别</p>
<p>java8的jvm规范只说</p>
<blockquote>
<p>The Java Virtual Machine then links the initial class, initializes it, and invokes the public class method void main(String[])</p>
</blockquote>
<p>没有具体规定 main 函数的签名要求(也没有提 main 所在类的要求)，因此具体报错原因依然未知</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2019-10-18-%E7%90%86%E8%A7%A3NIO.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019-10-18-%E7%90%86%E8%A7%A3NIO.html" class="post-title-link" itemprop="url">理解NIO</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-10-18 00:00:00" itemprop="dateCreated datePublished" datetime="2019-10-18T00:00:00+08:00">2019-10-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-07-16 19:49:55" itemprop="dateModified" datetime="2020-07-16T19:49:55+08:00">2020-07-16</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.1k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">之前写过一篇《Java的IO》, 对看的相关文章做了总结, 但实际上自己并没有理解, 直到看了知乎上《进击的Java新人》, 从操作系统内核调用上去看, 才慢慢理解</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="IO"><a href="#IO" class="headerlink" title="IO"></a>IO</h1><h2 id="阻塞IO"><a href="#阻塞IO" class="headerlink" title="阻塞IO"></a>阻塞IO</h2><p>以server处理socket连接为例, 标准的几步</p>
<ol>
<li>socket</li>
<li>bind</li>
<li>listen</li>
<li>accept  &lt;- block</li>
<li>receive</li>
</ol>
<p>不管是Java还是c, 在accept时都是阻塞等待操作系统返回新连接</p>
<h2 id="非阻塞IO"><a href="#非阻塞IO" class="headerlink" title="非阻塞IO"></a>非阻塞IO</h2><ol>
<li>socket</li>
<li>bind</li>
<li>listen</li>
<li>fcntl(O_NONBLOCK), accept  &lt;- unblock</li>
<li>receive</li>
</ol>
<p>手动设置fd(file_descriptor)的属性, 可以使用操作系统提供的非阻塞接口, 即无输入返回0, 有输入返回大于0, 如果需要处理数据, 需要循环检查返回值</p>
<p>接口立即返回, 程序可以执行下文, 所以是非阻塞</p>
<p>要等接口返回有效内容后才能执行期望的操作, 所以是同步的</p>
<h2 id="IO多路复用"><a href="#IO多路复用" class="headerlink" title="IO多路复用"></a>IO多路复用</h2><p>上面两种模型, 都是一个线程对应一个连接</p>
<blockquote>
<p>在Java中创建线程，一个线程默认就会预留1M的空间，那么1G的内存也不过只能支持1000个线程创建而已。而且，随着线程数的增多，线程之间的调度和切换，引发的资源竞争也会加剧，使整个系统变得很慢</p>
</blockquote>
<p>IO多路复用, 支持一个线程管理多个连接, 所有连接均没有消息时, 对应的接口即阻塞</p>
<h3 id="select"><a href="#select" class="headerlink" title="select"></a>select</h3><ol>
<li>socket</li>
<li>bind</li>
<li>listen</li>
<li>select &lt;- block</li>
<li>accept</li>
<li>receive</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">while(true) &#123;</span><br><span class="line">    // 如果没有消息, 这里会阻塞</span><br><span class="line">    n = select(fd_set)</span><br><span class="line">    // 走到这里说明fd_set不为空, 有需要处理的连接, accept不会阻塞</span><br><span class="line">    accept()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="poll"><a href="#poll" class="headerlink" title="poll"></a>poll</h3><ol>
<li>socket</li>
<li>bind</li>
<li>listen</li>
<li>poll &lt;- block</li>
<li>accept</li>
<li>receive</li>
</ol>
<p>和select基本相同, 只是fd_set从数组换成了链表, 支持的fd数超过1024</p>
<h3 id="epoll"><a href="#epoll" class="headerlink" title="epoll"></a>epoll</h3><h4 id="对poll的优化"><a href="#对poll的优化" class="headerlink" title="对poll的优化"></a>对poll的优化</h4><ul>
<li>返回可读的fd, 不需要再遍历一遍哪些可读</li>
<li>接口拆分为 epoll_ctl 和 epoll_wait, 减少了用户空间到内核空间的拷贝</li>
</ul>
<p>只有较新的linux支持epoll</p>
<h4 id="两种模式"><a href="#两种模式" class="headerlink" title="两种模式"></a>两种模式</h4><h5 id="Edge模式"><a href="#Edge模式" class="headerlink" title="Edge模式"></a>Edge模式</h5><p>空的接收缓冲区刚接收到数据时触发读事件; 满的缓冲区刚空出空间时触发读事件</p>
<h5 id="Level模式"><a href="#Level模式" class="headerlink" title="Level模式"></a>Level模式</h5><p>接收缓冲区不为空, 有数据可读, 则读事件一直触发; 发送缓冲区不满可以继续写入数据, 则写事件一直触发</p>
<h1 id="netty"><a href="#netty" class="headerlink" title="netty"></a>netty</h1><p>Java NIO的selector是对select&#x2F;poll&#x2F;epoll的封装</p>
<h1 id="感想"><a href="#感想" class="headerlink" title="感想"></a>感想</h1><p>看讲Java IO的文章, 总是不理解为什么会有这么多模型, 既然有效率更高的, 直接用更好的不就行了吗?</p>
<p>所以说问题要看本质, Java IO能做什么, 取决于操作系统提供了什么接口</p>
<p>说到底还是大学课堂涉及的内容, 上课时不知道学了能干啥而知其然不知其所以然, 现在遇到了使用场景就得得好好补一补</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/24393775">进击的Java新人 - 知乎</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2019-04-21-%E7%9C%8B%E5%AE%8C%E5%A4%A9%E5%AE%89%E9%97%A8%E7%BA%AA%E5%BD%95%E7%89%87%E7%9A%84%E4%B8%80%E7%82%B9%E6%84%9F%E5%8F%97.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019-04-21-%E7%9C%8B%E5%AE%8C%E5%A4%A9%E5%AE%89%E9%97%A8%E7%BA%AA%E5%BD%95%E7%89%87%E7%9A%84%E4%B8%80%E7%82%B9%E6%84%9F%E5%8F%97.html" class="post-title-link" itemprop="url">看完天安门纪录片的一点感受</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-04-21 12:50:37 / 修改时间：12:59:42" itemprop="dateCreated datePublished" datetime="2019-04-21T12:50:37+08:00">2019-04-21</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>906</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">喜欢谈论政治是男性变得油腻的表现吗</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="最大感受"><a href="#最大感受" class="headerlink" title="最大感受"></a>最大感受</h1><p>对人类来说, 是一场残酷又真实的大型社会学实验</p>
<p>邓小平真的是”实干家”, 心狠手辣, 学运带来的阻力比起赵家内部的阻力恐怕还是小很多</p>
<p>我的观点和片子里的吴国光(前政府官员)梁晓燕(教师)差不多</p>
<p>但是假如我处于那个环境肯定也会前赴后继地假如(然后在清理的前几天跑路?是真的怂)</p>
<h1 id="负面情绪"><a href="#负面情绪" class="headerlink" title="负面情绪"></a>负面情绪</h1><h2 id="修宪"><a href="#修宪" class="headerlink" title="修宪"></a>修宪</h2><table>
<thead>
<tr>
<th>时间</th>
<th>事件</th>
<th>中国官方舆论</th>
</tr>
</thead>
<tbody><tr>
<td>2017-5-3</td>
<td>安倍晋三宣布将在2020年修宪</td>
<td><a target="_blank" rel="noopener" href="http://world.people.com.cn/n1/2017/0708/c1002-29391510.html">铭记历史，防止悲剧重演–国际–人民网</a></td>
</tr>
<tr>
<td>2018-3-9</td>
<td>第十三届全国人民代表大会《宪法修正案》通过</td>
<td><a target="_blank" rel="noopener" href="http://lianghui.people.com.cn/2018npc/n1/2018/0317/c417507-29872934.html">让宪法之树常青–中国人大新闻–人民网</a></td>
</tr>
</tbody></table>
<h2 id="舆论"><a href="#舆论" class="headerlink" title="舆论"></a>舆论</h2><p>在1989年的中国, 对于掌握了舆论渠道的国家权力来说, 几万几十万个人的静坐&#x2F;绝食可以被轻易抹消掉</p>
<p>假如发生在现在, 2019年, 互联网普及的时代, 又会是什么样子?</p>
<h2 id="大学生"><a href="#大学生" class="headerlink" title="大学生"></a>大学生</h2><p>不要真的相信宪法上的话, 要看实际发生的事</p>
<p>学生真的把自己当成了国家的主人, 采取的行动就显得过于天真</p>
<p>你是人民还是人民的敌人, 不是你说了算(实际上你做的事对这个国家的发展有没有利还真不一定)</p>
<p>这件事也许是最后一根稻草, 让顶尖大学的学生们失去了改造国家的志向</p>
<p>精致利己被骂就被骂吧, 总比上街丢了命好</p>
<h2 id="政治改革"><a href="#政治改革" class="headerlink" title="政治改革"></a>政治改革</h2><h3 id="现状"><a href="#现状" class="headerlink" title="现状"></a>现状</h3><p>为什么(那个年代)说”中国人的概念里革命是正面的但改革不一定”</p>
<p>任何改革的阻力都是既得利益者, 经济改革初期工人利益受损, 但改革并不需要工人的支持, 先富带动后富, 有能力推动改革的都是有能力先富的人; 政治改革则相反, 有能力推动改革的往往是既得利益者, 例如能够一人修宪的人</p>
<p>邓&#x2F;江&#x2F;胡重心在经济改革, 政治改革的优先级在之下; 到了维尼, 高度集权的政府似乎对其很反感</p>
<h3 id="改革"><a href="#改革" class="headerlink" title="改革?"></a>改革?</h3><p>所谓的政治改革, 改成什么样子才最好呢?</p>
<p>我不想要一个乌合之众的政体, 更不想要一个最高权力者随意修宪的政体——存在吗?</p>
<h1 id="正面想法"><a href="#正面想法" class="headerlink" title="正面想法"></a>正面想法</h1><p>权力会使人变质</p>
<p>任何时候都要知道自己在做什么, 自己的目的是什么, 别人期望你做什么, 他的逻辑是否严密</p>
<p>多换位思考, 如果你是对方, 你需要什么, 你可以提供什么</p>
<p>想要对政治事件有比较客观的认识, 还是要多综合各方面的观点, 再加上自己的三观(和自己的屁股)(不知道我查的相关资料够不够全面, 但应该不会和事实偏差太多)</p>
<h1 id="null"><a href="#null" class="headerlink" title="null"></a>null</h1><p>当年的柴玲有点黑版桂纶镁的意思(可惜后来变成坦克了)</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2019-04-13-%E3%80%8A%E6%B7%98%E5%AE%9D%E6%8A%80%E6%9C%AF%E8%BF%99%E5%8D%81%E5%B9%B4%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019-04-13-%E3%80%8A%E6%B7%98%E5%AE%9D%E6%8A%80%E6%9C%AF%E8%BF%99%E5%8D%81%E5%B9%B4%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0.html" class="post-title-link" itemprop="url">《淘宝技术这十年》读书笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-04-13 23:50:37" itemprop="dateCreated datePublished" datetime="2019-04-13T23:50:37+08:00">2019-04-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-04-15 09:55:32" itemprop="dateModified" datetime="2019-04-15T09:55:32+08:00">2019-04-15</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.8k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

            <div class="post-description">讲了阿里03-13年间后端技术的演变, 可以说代表了一个典型的互联网应用从简单到复杂的迭代过程, 很适合我这种小白了解"计算机技术"专业的人毕业后应该做什么</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="技术演变"><a href="#技术演变" class="headerlink" title="技术演变"></a>技术演变</h1><h2 id="个人网站-2003-x2F-05-2003-x2F-12"><a href="#个人网站-2003-x2F-05-2003-x2F-12" class="headerlink" title="个人网站 2003&#x2F;05-2003&#x2F;12"></a>个人网站 2003&#x2F;05-2003&#x2F;12</h2><h3 id="LAMP"><a href="#LAMP" class="headerlink" title="LAMP"></a>LAMP</h3><p>linux + apache + mysql + php</p>
<h3 id="分库"><a href="#分库" class="headerlink" title="分库"></a>分库</h3><p>读写分离, 备份</p>
<h2 id="个人网站的升级-2004-x2F-01-2004-x2F-05"><a href="#个人网站的升级-2004-x2F-01-2004-x2F-05" class="headerlink" title="个人网站的升级 2004&#x2F;01-2004&#x2F;05"></a>个人网站的升级 2004&#x2F;01-2004&#x2F;05</h2><h3 id="mysql-gt-Oracle"><a href="#mysql-gt-Oracle" class="headerlink" title="mysql-&gt;Oracle"></a>mysql-&gt;Oracle</h3><p>myISAM write的时候要lock整个表</p>
<h2 id="企业级Java网站-2004-x2F-06-2006-x2F-12"><a href="#企业级Java网站-2004-x2F-06-2006-x2F-12" class="headerlink" title="企业级Java网站 2004&#x2F;06-2006&#x2F;12"></a>企业级Java网站 2004&#x2F;06-2006&#x2F;12</h2><h3 id="php-gt-Java"><a href="#php-gt-Java" class="headerlink" title="php-&gt;Java"></a>php-&gt;Java</h3><p>php的sql relay会死锁</p>
<p>分模块同步开发, 开发完后分模块替换</p>
<h3 id="Java-MVC框架"><a href="#Java-MVC框架" class="headerlink" title="Java MVC框架"></a>Java MVC框架</h3><p>struts1.x-&gt;WebX</p>
<h3 id="iSearch"><a href="#iSearch" class="headerlink" title="iSearch"></a>iSearch</h3><h3 id="分库-1"><a href="#分库-1" class="headerlink" title="分库"></a>分库</h3><p>DBRoute</p>
<h3 id="缓存TBStore"><a href="#缓存TBStore" class="headerlink" title="缓存TBStore"></a>缓存TBStore</h3><p>Berkeley DB</p>
<p>key-&gt;hashed key-&gt;mod-&gt;server</p>
<p>缓存变动较少的信息</p>
<p>更新数据库的时候要同步更新缓存</p>
<h3 id="大字段存储位置"><a href="#大字段存储位置" class="headerlink" title="大字段存储位置"></a>大字段存储位置</h3><p>db -&gt; cache -&gt; fs</p>
<h3 id="CDN网络"><a href="#CDN网络" class="headerlink" title="CDN网络"></a>CDN网络</h3><h2 id="创造技术-2007-x2F-01-2007-x2F-12"><a href="#创造技术-2007-x2F-01-2007-x2F-12" class="headerlink" title="创造技术 2007&#x2F;01-2007&#x2F;12"></a>创造技术 2007&#x2F;01-2007&#x2F;12</h2><h3 id="文件系统TFS"><a href="#文件系统TFS" class="headerlink" title="文件系统TFS"></a>文件系统TFS</h3><p>针对小文件</p>
<p>图片处理在nginx上进行</p>
<p>图片读取多级缓存</p>
<h3 id="缓存Tair"><a href="#缓存Tair" class="headerlink" title="缓存Tair"></a>缓存Tair</h3><p>TBStore, TDBM</p>
<p>分布式, config server, data server</p>
<h3 id="iSearch-1"><a href="#iSearch-1" class="headerlink" title="iSearch"></a>iSearch</h3><p>多份相同数据, 单行-&gt;矩阵</p>
<h2 id="分布式电子商务操作系统-2008-x2F-01-2012-x2F-12"><a href="#分布式电子商务操作系统-2008-x2F-01-2012-x2F-12" class="headerlink" title="分布式电子商务操作系统 2008&#x2F;01-2012&#x2F;12"></a>分布式电子商务操作系统 2008&#x2F;01-2012&#x2F;12</h2><h3 id="服务化"><a href="#服务化" class="headerlink" title="服务化"></a>服务化</h3><p>标签服务&#x2F;属性服务&#x2F;用户信息服务&#x2F;交易服务 -&gt; 模块化</p>
<h3 id="中间件"><a href="#中间件" class="headerlink" title="中间件"></a>中间件</h3><h4 id="服务注册-HSF"><a href="#服务注册-HSF" class="headerlink" title="服务注册 HSF"></a>服务注册 HSF</h4><p>RPC(TCP&#x2F;IP)</p>
<p>OSGI</p>
<h4 id="消息-notify"><a href="#消息-notify" class="headerlink" title="消息 notify"></a>消息 notify</h4><p>异步</p>
<p>服务注册等</p>
<h4 id="分布式数据访问-TDDL"><a href="#分布式数据访问-TDDL" class="headerlink" title="分布式数据访问 TDDL"></a>分布式数据访问 TDDL</h4><p>分布式存储</p>
<p>访问路由</p>
<p>多向非对称复制</p>
<p>存储扩展</p>
<p>CommonDAO -&gt; TDDL -&gt; 愚公数据迁移, 精卫数据复制 </p>
<h3 id="session框架"><a href="#session框架" class="headerlink" title="session框架"></a>session框架</h3><h3 id="开放平台"><a href="#开放平台" class="headerlink" title="开放平台"></a>开放平台</h3><p>memcached</p>
<p>hadoop</p>
<h1 id="大牛的话"><a href="#大牛的话" class="headerlink" title="大牛的话"></a>大牛的话</h1><h2 id="正明"><a href="#正明" class="headerlink" title="正明"></a>正明</h2><p>找到自己感兴趣的, 花时间投进去, 通过实践后的知识积累比只看书本有用得多. 我看过一本操作系统方面的英文书, 其中引用了一段中国人的格言:”I hear and I forget. I see and I remember. I do and I understand.” 荀子说”不闻不若闻之, 闻之不若见之, 见之不若知之, 知之不若行之.”</p>
<h2 id="正祥"><a href="#正祥" class="headerlink" title="正祥"></a>正祥</h2><p>一个人如果把做成事作为目标, 该他得到的东西一定会顺理成章得到. 但是如果把上升作为主要目标, 做同样的事, 结果就会完全不一样. 你的心态会最终决定你的成就.</p>
<h2 id="毕玄"><a href="#毕玄" class="headerlink" title="毕玄"></a>毕玄</h2><p>现在如果没有什么特殊情况的话, 我会花很多时间看技术方面的文章或者图书, 写代码的时间可能每天只有两三个小时. 每隔一段时间回去想一想将来干什么比较好, 因为写代码时间会过的很快, 要经常跳出来想一想.</p>
<p>至于晋升, 重要的是在这个过程中你回顾了你一年做了什么事情, 对公司有什么贡献, 技术上有哪些成长. 我们要看技术方面的专业性, 然后看你的技术对公司的业务发展有多少贡献. 还有一点, 我比较看中的是, 也许你不在其位, 但能够跳出自己的范围, 想到公司未来会面临什么问题, 怎么解决, 如果能落实就最好了, 不管你落实的技术含量有多高, 关键是你解决了什么样的问题. 如果你能做到这些, 你这个人对公司就非常重要.</p>
<p>在校招的时候, 我比较欣赏的学生往往是那些”不务正业”类型的. 我经常会问他们, 你有没有利用业余时间处于自己的技术兴趣做的一些小东西. 这样的学生我们通常会比较感兴趣, 我认为这样的学生是真正喜欢技术. 聪明程度一般就可以的, 他能够进入这些不错的学校, 智商是不会有什么问题的.</p>
<h2 id="放翁"><a href="#放翁" class="headerlink" title="放翁"></a>放翁</h2><p>第一个是做事要自己思考后再去问别人, 而不是一遇到问题就找人求助. 第二个是不断地打破自己的一些想法, 你不要担心自己今天已经做了50%的工作, 要是推导重来, 前面的事情都白干了. 我现在带的两个新人成长很快, 但是都有类似的经历, 就是一个东西被我反复推翻重做, 在这个过程中就是不断地成长, 要思考我为什么让你推倒重做, 若想不清楚, 下次重做的概率会更大, 这样慢慢地就学会了思考.</p>
<h2 id="吴翰清"><a href="#吴翰清" class="headerlink" title="吴翰清"></a>吴翰清</h2><p>从基本功做起, 研究常见的漏洞, 把它查出来, 并去分析它, 不要用它来做坏事. 另外, 去看看公开的漏洞, 研究一下漏洞的利用技巧.</p>
<h2 id="云铮"><a href="#云铮" class="headerlink" title="云铮"></a>云铮</h2><p>兴趣是最好的老师, 坚持是达到梦想的唯一途径, 当然, 在个人发展的不同阶段寻找到合适的导师很重要, 看准方向会事半功倍. 在刚刚参加工作还没有形成自己的判断时, 方向有两个来源, 一个是个人的兴趣, 一个是找一个你非常佩服且能掌握未来方向的人. 当然, 如果这两者正好重合, 那么剩下的就是脚踏实地坚持.</p>
<h2 id="多隆"><a href="#多隆" class="headerlink" title="多隆"></a>多隆</h2><p>发现问题, 解决问题, 不要绕开问题的本身; 多做事情, 不会吃亏, 即使不是你的事情.</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2019-03-23-%E5%9F%BA%E4%BA%8Efreeswitch%E7%9A%84unimrcp%E7%9A%84demo.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019-03-23-%E5%9F%BA%E4%BA%8Efreeswitch%E7%9A%84unimrcp%E7%9A%84demo.html" class="post-title-link" itemprop="url">基于freeswitch的unimrcp的demo</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2019-03-23 23:50:37" itemprop="dateCreated datePublished" datetime="2019-03-23T23:50:37+08:00">2019-03-23</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2019-04-15 09:59:46" itemprop="dateModified" datetime="2019-04-15T09:59:46+08:00">2019-04-15</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>6.7k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>6 分钟</span>
    </span>
</div>

            <div class="post-description">其实就是按照别人的教程实现了一个demo</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="unimrcp"><a href="#unimrcp" class="headerlink" title="unimrcp"></a>unimrcp</h1><h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p><a target="_blank" rel="noopener" href="http://www.unimrcp.org/">unimrcp</a> 是一个开源的mrcp实现库</p>
<p>将业务代码以 <a target="_blank" rel="noopener" href="http://www.unimrcp.org/manuals/html/PluginImplementationManual.html">plugin</a> 的形式插入到unimrcp中执行, 完成后编译, 运行&#x2F;usr&#x2F;bin&#x2F;unimrcp&#x2F;下的脚本即可启动mrcp服务器</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>配置文件 <code>/usr/bin/unimrcp/conf/unimrcpserver.xml</code></p>
<p>实现mrcpv2需要的基本配置:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">unimrcpserver</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">&quot;unimrcpserver.xsd&quot;</span></span></span><br><span class="line"><span class="tag">               <span class="attr">version</span>=<span class="string">&quot;1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ip</span>&gt;</span>172.19.**.171<span class="tag">&lt;/<span class="name">ip</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">components</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resource-factory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span> <span class="attr">id</span>=<span class="string">&quot;speechsynth&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span> <span class="attr">id</span>=<span class="string">&quot;speechrecog&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span> <span class="attr">id</span>=<span class="string">&quot;recorder&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">resource</span> <span class="attr">id</span>=<span class="string">&quot;speakverify&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resource-factory</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">sip-uas</span> <span class="attr">id</span>=<span class="string">&quot;SIP-Agent-1&quot;</span> <span class="attr">type</span>=<span class="string">&quot;SofiaSIP&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">sip-port</span>&gt;</span>8060<span class="tag">&lt;/<span class="name">sip-port</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">sip-transport</span>&gt;</span>udp,tcp<span class="tag">&lt;/<span class="name">sip-transport</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ua-name</span>&gt;</span>UniMRCP SofiaSIP<span class="tag">&lt;/<span class="name">ua-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">sdp-origin</span>&gt;</span>UniMRCPServer<span class="tag">&lt;/<span class="name">sdp-origin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">sip-session-expires</span>&gt;</span>600<span class="tag">&lt;/<span class="name">sip-session-expires</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">sip-min-session-expires</span>&gt;</span>120<span class="tag">&lt;/<span class="name">sip-min-session-expires</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">sip-uas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">mrcpv2-uas</span> <span class="attr">id</span>=<span class="string">&quot;MRCPv2-Agent-1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mrcp-port</span>&gt;</span>1544<span class="tag">&lt;/<span class="name">mrcp-port</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">max-connection-count</span>&gt;</span>100<span class="tag">&lt;/<span class="name">max-connection-count</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">max-shared-use-count</span>&gt;</span>100<span class="tag">&lt;/<span class="name">max-shared-use-count</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">force-new-connection</span>&gt;</span>false<span class="tag">&lt;/<span class="name">force-new-connection</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rx-buffer-size</span>&gt;</span>1024<span class="tag">&lt;/<span class="name">rx-buffer-size</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">tx-buffer-size</span>&gt;</span>1024<span class="tag">&lt;/<span class="name">tx-buffer-size</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">inactivity-timeout</span>&gt;</span>600<span class="tag">&lt;/<span class="name">inactivity-timeout</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">termination-timeout</span>&gt;</span>3<span class="tag">&lt;/<span class="name">termination-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mrcpv2-uas</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">media-engine</span> <span class="attr">id</span>=<span class="string">&quot;Media-Engine-1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">realtime-rate</span>&gt;</span>1<span class="tag">&lt;/<span class="name">realtime-rate</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">media-engine</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">rtp-factory</span> <span class="attr">id</span>=<span class="string">&quot;RTP-Factory-1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rtp-port-min</span>&gt;</span>5000<span class="tag">&lt;/<span class="name">rtp-port-min</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rtp-port-max</span>&gt;</span>6000<span class="tag">&lt;/<span class="name">rtp-port-max</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rtp-factory</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin-factory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">engine</span> <span class="attr">id</span>=<span class="string">&quot;Demo-Synth-1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;demosynth&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">engine</span> <span class="attr">id</span>=<span class="string">&quot;my-Synth-1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my-synth&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">engine</span> <span class="attr">id</span>=<span class="string">&quot;Demo-Recog-1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;demorecog&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">	    <span class="tag">&lt;<span class="name">engine</span> <span class="attr">id</span>=<span class="string">&quot;my-Recog-1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;my-recog&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">engine</span> <span class="attr">id</span>=<span class="string">&quot;Demo-Verifier-1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;demoverifier&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">engine</span> <span class="attr">id</span>=<span class="string">&quot;Recorder-1&quot;</span> <span class="attr">name</span>=<span class="string">&quot;mrcprecorder&quot;</span> <span class="attr">enable</span>=<span class="string">&quot;true&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin-factory</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">components</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">rtp-settings</span> <span class="attr">id</span>=<span class="string">&quot;RTP-Settings-1&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">jitter-buffer</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">adaptive</span>&gt;</span>1<span class="tag">&lt;/<span class="name">adaptive</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">playout-delay</span>&gt;</span>50<span class="tag">&lt;/<span class="name">playout-delay</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">max-playout-delay</span>&gt;</span>600<span class="tag">&lt;/<span class="name">max-playout-delay</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">time-skew-detection</span>&gt;</span>1<span class="tag">&lt;/<span class="name">time-skew-detection</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">jitter-buffer</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ptime</span>&gt;</span>20<span class="tag">&lt;/<span class="name">ptime</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">codecs</span> <span class="attr">own-preference</span>=<span class="string">&quot;false&quot;</span>&gt;</span>PCMU PCMA L16/96/8000 telephone-event/101/8000<span class="tag">&lt;/<span class="name">codecs</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rtcp</span> <span class="attr">enable</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rtcp-bye</span>&gt;</span>1<span class="tag">&lt;/<span class="name">rtcp-bye</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tx-interval</span>&gt;</span>5000<span class="tag">&lt;/<span class="name">tx-interval</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">rx-resolution</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">rx-resolution</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">rtcp</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">rtp-settings</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mrcpv2-profile</span> <span class="attr">id</span>=<span class="string">&quot;uni2&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">sip-uas</span>&gt;</span>SIP-Agent-1<span class="tag">&lt;/<span class="name">sip-uas</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mrcpv2-uas</span>&gt;</span>MRCPv2-Agent-1<span class="tag">&lt;/<span class="name">mrcpv2-uas</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">media-engine</span>&gt;</span>Media-Engine-1<span class="tag">&lt;/<span class="name">media-engine</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rtp-factory</span>&gt;</span>RTP-Factory-1<span class="tag">&lt;/<span class="name">rtp-factory</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">rtp-settings</span>&gt;</span>RTP-Settings-1<span class="tag">&lt;/<span class="name">rtp-settings</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mrcpv2-profile</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">unimrcpserver</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>可以看到, 最后的profile分别指定了各参数使用的子配置; 基本上, 默认的配置修改了ip即可正常运行</p>
<p>注意: </p>
<ol>
<li><code>plugin-factory</code> 中添加自己的plugin, 禁用默认的相同功能的plugin</li>
<li>区分各端口的作用, 默认的8060是sip通信的端口, 1544是mrcp通信的端口, 5000-6000是rtp通信的端口; 另外默认1554为rtsp的端口, 是mrcpv1使用的</li>
</ol>
<h1 id="freeswitch"><a href="#freeswitch" class="headerlink" title="freeswitch"></a>freeswitch</h1><h2 id="安装unimrcp模块"><a href="#安装unimrcp模块" class="headerlink" title="安装unimrcp模块"></a>安装unimrcp模块</h2><p>源码路径&#x2F;modules.xml取消mod_unimrcp的注释</p>
<p>make mod_unimrcp-install</p>
<p>设置fs启动时自动加载该模块: 取消&#x2F;usr&#x2F;local&#x2F;freeswitch&#x2F;conf&#x2F;autoload_configs&#x2F;modules.conf.xml中mod_unimrcp的注释</p>
<h2 id="配置一份mrcp"><a href="#配置一份mrcp" class="headerlink" title="配置一份mrcp"></a>配置一份mrcp</h2><p>运行路径&#x2F;conf&#x2F;mrcp_profiles&#x2F;下新增unimrcpserver-mrcp-v2.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">include</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span> <span class="attr">name</span>=<span class="string">&quot;unimrcpserver-mrcp2&quot;</span> <span class="attr">version</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- MRCP 服务器地址 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;server-ip&quot;</span> <span class="attr">value</span>=<span class="string">&quot;8&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- MRCP SIP 端口号 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;server-port&quot;</span> <span class="attr">value</span>=<span class="string">&quot;8060&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;resource-location&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- FreeSWITCH IP, 端口以及 SIP 传输方式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;client-ip&quot;</span> <span class="attr">value</span>=<span class="string">&quot;172.19.**.171&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;client-port&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5069&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;sip-transport&quot;</span> <span class="attr">value</span>=<span class="string">&quot;udp&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;speechsynth&quot;</span> <span class="attr">value</span>=<span class="string">&quot;speechsynthesizer&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;speechrecog&quot;</span> <span class="attr">value</span>=<span class="string">&quot;speechrecognizer&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;rtp-ip&quot;</span> <span class="attr">value</span>=<span class="string">&quot;172.19.46.171&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;rtp-port-min&quot;</span> <span class="attr">value</span>=<span class="string">&quot;4000&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;rtp-port-max&quot;</span> <span class="attr">value</span>=<span class="string">&quot;5000&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;codecs&quot;</span> <span class="attr">value</span>=<span class="string">&quot;PCMU PCMA L16/96/8000&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- Add any default MRCP params for SPEAK requests here --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">synthparams</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">synthparams</span>&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">&lt;!-- Add any default MRCP params for RECOGNIZE requests here --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">recogparams</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--param name=&quot;start-input-timers&quot; value=&quot;false&quot;/--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">recogparams</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意: </p>
<ol>
<li>mrcp服务器的端口是提供sip通信的端口</li>
<li>指定的fs的端口是专门用来和mrcp服务器交换的, 和fs自己的internal&#x2F;external端口都不能相同</li>
</ol>
<h2 id="指定默认使用该mrcp配置"><a href="#指定默认使用该mrcp配置" class="headerlink" title="指定默认使用该mrcp配置"></a>指定默认使用该mrcp配置</h2><p>运行路径&#x2F;conf&#x2F;autoload_configs&#x2F;unimrcp.conf.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">name</span>=<span class="string">&quot;unimrcp.conf&quot;</span> <span class="attr">description</span>=<span class="string">&quot;UniMRCP Client&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">settings</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;default-tts-profile&quot;</span> <span class="attr">value</span>=<span class="string">&quot;unimrcpserver-mrcp2&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;default-asr-profile&quot;</span> <span class="attr">value</span>=<span class="string">&quot;unimrcpserver-mrcp2&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;log-level&quot;</span> <span class="attr">value</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;enable-profile-events&quot;</span> <span class="attr">value</span>=<span class="string">&quot;false&quot;</span>/&gt;</span></span><br><span class="line">        </span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;max-connection-count&quot;</span> <span class="attr">value</span>=<span class="string">&quot;100&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;offer-new-connection&quot;</span> <span class="attr">value</span>=<span class="string">&quot;1&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param</span> <span class="attr">name</span>=<span class="string">&quot;request-timeout&quot;</span> <span class="attr">value</span>=<span class="string">&quot;3000&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">settings</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">X-PRE-PROCESS</span> <span class="attr">cmd</span>=<span class="string">&quot;include&quot;</span> <span class="attr">data</span>=<span class="string">&quot;../mrcp_profiles/*.xml&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="写语法文件和脚本"><a href="#写语法文件和脚本" class="headerlink" title="写语法文件和脚本"></a>写语法文件和脚本</h2><p>略</p>
<p>总之, 要分清fs服务器和mrcp服务器, 清楚每个端口的区别</p>
<hr>
<p>参考资料</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://cotin.tech/AI/FreeswitchSetting/">构建简单的智能客服系统（一）——FreeSWITCH 搭建与配置 | Cotin’s Homepage</a></li>
<li><a target="_blank" rel="noopener" href="https://cotin.tech/AI/UniMRCPASR/">构建简单的智能客服系统（二）——基于 UniMRCP 实现讯飞 ASR MRCP Server | Cotin’s Homepage</a></li>
<li><a target="_blank" rel="noopener" href="https://cotin.tech/AI/UniMRCPTTS/">构建简单的智能客服系统（三）——基于 UniMRCP 实现讯飞 TTS MRCP Server | Cotin’s Homepage</a></li>
</ol>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2019-03-18-Linux%E7%9A%84init%E6%95%B4%E7%90%86.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019-03-18-Linux%E7%9A%84init%E6%95%B4%E7%90%86.html" class="post-title-link" itemprop="url">Linux的init整理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-03-18 19:50:37 / 修改时间：19:49:24" itemprop="dateCreated datePublished" datetime="2019-03-18T19:50:37+08:00">2019-03-18</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>227</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>1 分钟</span>
    </span>
</div>

            <div class="post-description">initd, service, systemd, systemctl</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>Linux 操作系统的启动首先从 BIOS 开始, 接下来进入 boot loader, 由 bootloader 载入内核, 进行内核初始化</p>
<p>内核初始化的最后一步就是启动 pid 为 1 的 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/Init">init</a> 进程. 这个进程是系统的第一个进程,  负责产生其他所有用户进程。</p>
<h1 id="Sysvinit"><a href="#Sysvinit" class="headerlink" title="Sysvinit"></a>Sysvinit</h1><p><a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/linux/1407_liuming_init1/index.html">浅析 Linux 初始化 init 系统，第 1 部分: sysvinit</a></p>
<h1 id="UpStart"><a href="#UpStart" class="headerlink" title="UpStart"></a>UpStart</h1><p><a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/linux/1407_liuming_init2/index.html">浅析 Linux 初始化 init 系统，第 2 部分: UpStart</a></p>
<h1 id="Systemd"><a href="#Systemd" class="headerlink" title="Systemd"></a>Systemd</h1><p><a target="_blank" rel="noopener" href="https://www.ibm.com/developerworks/cn/linux/1407_liuming_init3/index.html">浅析 Linux 初始化 init 系统，第 3 部分: Systemd</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://hahahaha123567.github.io/2019-03-18-%E5%87%A0%E4%B8%AAJDK%E5%B7%A5%E5%85%B7.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="hahahaha123567">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="hahahaha123567">
      <meta itemprop="description" content="niconiconi">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | hahahaha123567">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019-03-18-%E5%87%A0%E4%B8%AAJDK%E5%B7%A5%E5%85%B7.html" class="post-title-link" itemprop="url">几个JDK工具</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>
      

      <time title="创建时间：2019-03-18 15:50:37 / 修改时间：18:01:54" itemprop="dateCreated datePublished" datetime="2019-03-18T15:50:37+08:00">2019-03-18</time>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>1.9k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>2 分钟</span>
    </span>
</div>

            <div class="post-description">几个JDK自带的操作查看JVM的工具</div>
        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="jps"><a href="#jps" class="headerlink" title="jps"></a>jps</h1><p>列出所有正在运行的JVM</p>
<h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>jps命令列出目标系统上已检测的Java HotSpot VM, 该命令仅限于报告具有访问权限的JVM的信息</p>
<p>如果在未指定hostid的情况下运行jps命令, 则它将在本地主机上搜索已检测的JVM; 如果以hostid启动，则它使用指定的协议和端口在指定的主机上搜索JVM</p>
<p>jps命令报告在目标系统上找到的每个已检测JVM的本地JVM标识符或lvmid.  lvmid通常(但不一定)是JVM进程的操作系统进程标识符. 如果没有选项, jps会列出每个Java应用程序的lvmid, 后跟应用程序的类名或jar文件名的简短形式. 类名或JAR文件名的缩写形式省略了类的包信息或JAR文件路径信息</p>
<p>jps命令使用Java启动程序查找传递给main方法的类名和参数. 如果使用自定义启动程序启动目标JVM, 则类或JAR文件名和main方法的参数不可用. 在这种情况下, jps命令输出类名称或JAR文件名的字符串Unknown以及main方法的参数</p>
<p>jps命令生成的JVM列表可以由授予运行该命令的主体的权限限制. 该命令仅列出原则具有访问权限的JVM, 具体取决于操作系统特定的访问控制机制</p>
<h2 id="options"><a href="#options" class="headerlink" title="options"></a>options</h2><p><code>-q</code> 只显示pid</p>
<p><code>-m</code> 显示传递给 main() 的参数</p>
<p><code>-l</code> 显示应用程序主类的完整包名或应用程序的JAR文件的完整路径名</p>
<p><code>-v</code> 显示传递给JVM的参数</p>
<h1 id="jinfo"><a href="#jinfo" class="headerlink" title="jinfo"></a>jinfo</h1><p>查看&#x2F;修改JVM参数信息</p>
<h2 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h2><p>jinfo命令打印指定Java进程或核心文件或远程调试服务器的Java配置信息,  包括Java系统属性和JVM命令行标志 </p>
<p>如果指定的进程在64位JVM上运行, 可能需要指定-J-d64选项: jinfo-J-d64 -sysprops pid</p>
<p>该指令JDK以后可能不再支持</p>
<h2 id="options-1"><a href="#options-1" class="headerlink" title="options"></a>options</h2><p><code>no-option</code> 显示命令行和系统属性键值对</p>
<p><code>-flag name</code> 显示指定命令行键值对</p>
<p><code>-flag [+|-]name</code> 启用或禁用指定命令行属性</p>
<p><code>-flag name=value</code> 设置指定命令行属性值</p>
<p><code>-flags</code> 显示传递给JVM的命令行属性</p>
<p><code>-sysprops</code> 显示系统属性键值对</p>
<h1 id="jstat"><a href="#jstat" class="headerlink" title="jstat"></a>jstat</h1><p>监控JVM运行状态</p>
<h2 id="功能-2"><a href="#功能-2" class="headerlink" title="功能"></a>功能</h2><p>显示JVM性能统计信息, 目标JVM由vmid指定</p>
<h2 id="options-2"><a href="#options-2" class="headerlink" title="options"></a>options</h2><p><code>-options</code> 查看可用选项</p>
<p><code>-class</code> 类装载器统计</p>
<p><code>-compiler</code> jit编译器统计</p>
<p><code>-gc</code> 垃圾收集堆信息</p>
<p><code>-gccapacity</code> 内存池生成和空间容量</p>
<p><code>-gccause</code> <code>-gcutil</code>的内容+最后一次gc的原因</p>
<p><code>-gcnew</code> 新生代统计</p>
<p><code>-gcnewcapacity</code> 新生代空间大小统计</p>
<p><code>-gcold</code> 年老代和元空间行为统计</p>
<p><code>-gcoldcapacity</code> 年老代空间大小统计</p>
<p><code>-gcmetacapacity</code> 元空间大小统计</p>
<p><code>-gcutil</code> 垃圾回收统计概要</p>
<p><code>-printcompilation</code> JVM编译器方法统计</p>
<h1 id="jmap"><a href="#jmap" class="headerlink" title="jmap"></a>jmap</h1><p>打印JVM堆内存信息</p>
<h2 id="功能-3"><a href="#功能-3" class="headerlink" title="功能"></a>功能</h2><p>打印JVM堆内存信息, 如果指定的进程在64位JVM上运行, 可能需要指定-J-d64选项: jmap-J-d64 -heap pid</p>
<p>该指令JDK以后可能不再支持</p>
<h2 id="options-3"><a href="#options-3" class="headerlink" title="options"></a>options</h2><p><code>no option</code> 显示共享对象映射</p>
<p><code>-dump: format=b, file=filename</code> 将Java堆另存为hprof二进制格式, 可以使用jhat命令读取生成的文件</p>
<p><code>-heap</code> 打印使用的垃圾收集, 头部配置和生成方式堆使用的堆摘要</p>
<p><code>-histo</code> 打印堆的直方图, 对于每个Java类, 将打印对象数, 内存大小(以字节为单位)和完全限定的类名</p>
<p><code>-clstats</code> 打印class loader统计信息</p>
<h1 id="jstack"><a href="#jstack" class="headerlink" title="jstack"></a>jstack</h1><p>打印java线程堆栈</p>
<h2 id="功能-4"><a href="#功能-4" class="headerlink" title="功能"></a>功能</h2><p>jstack命令打印指定Java进程, 核心文件或远程调试服务器的Java线程的Java堆栈跟踪</p>
<p>对于每个Java帧, 将打印完整的类名, 方法名, 字节代码索引(BCI)和行号(如果可用)</p>
<p>如果指定的进程在64位JVM上运行, 可能需要指定-J-d64选项: jstack -J-d64 -m pid</p>
<h2 id="options-4"><a href="#options-4" class="headerlink" title="options"></a>options</h2><p><code>-l</code> 长列表, 打印锁的额外信息</p>
<p><code>-m</code> 打印java和native c&#x2F;c++框架的所有栈信息</p>
<h1 id="排查实战"><a href="#排查实战" class="headerlink" title="排查实战"></a>排查实战</h1><h2 id="频繁GC问题或内存溢出问题"><a href="#频繁GC问题或内存溢出问题" class="headerlink" title="频繁GC问题或内存溢出问题"></a>频繁GC问题或内存溢出问题</h2><ol>
<li>使用<code>jps</code>查看线程ID</li>
<li>使用<code>jstat -gc 25252 250 20</code>查看gc情况, 一般比较关注PERM区的情况, 查看GC的增长情况</li>
<li>使用<code>jstat -gccause</code>输出上次GC原因</li>
<li>使用<code>jmap -dump:format=b,file=heapDump 25252</code>生成堆转储文件</li>
<li>使用jhat或者可视化工具(Eclipse Memory Analyzer, IBM HeapAnalyzer)分析堆情况</li>
<li>结合代码解决内存溢出或泄露问题</li>
</ol>
<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><ol>
<li>使用<code>jps</code>查看线程ID</li>
<li>使用<code>jstack 3331</code>查看线程情况</li>
</ol>
<hr>
<p>参考 <a target="_blank" rel="noopener" href="https://www.hollischuang.com/archives/1561">Java开发必须掌握的线上问题排查命令-HollisChuang’s Blog</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2017 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">hahahaha123567</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">162k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:27</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script>

  





  





</body>
</html>
